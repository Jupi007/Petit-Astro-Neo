<?xml version="1.0" ?>
<list xmlns="http://schemas.sulu.io/list-builder/list">

  <key>publications</key>

  <joins name="translation">
    <join>
      <entity-name>App\Entity\PublicationTranslation</entity-name>
      <field-name>App\Entity\Publication.translations</field-name>
      <condition>App\Entity\PublicationTranslation.locale = :locale</condition>
    </join>
  </joins>

  <joins name="changer" ref="translation">
    <join>
      <entity-name>%sulu.model.user.class%_changer</entity-name>
      <field-name>App\Entity\PublicationTranslation.changer</field-name>
    </join>
    <join>
      <entity-name>%sulu.model.contact.class%_changer</entity-name>
      <field-name>%sulu.model.user.class%_changer.contact</field-name>
    </join>
  </joins>

  <joins name="creator" ref="translation">
    <join>
      <entity-name>%sulu.model.user.class%_creator</entity-name>
      <field-name>App\Entity\PublicationTranslation.creator</field-name>
    </join>
    <join>
      <entity-name>%sulu.model.contact.class%_creator</entity-name>
      <field-name>%sulu.model.user.class%_creator.contact</field-name>
    </join>
  </joins>

  <properties>
    <property name="id" visibility="no" translation="sulu_admin.id">
      <field-name>id</field-name>
      <entity-name>App\Entity\Publication</entity-name>
    </property>

    <property name="title" visibility="always" searchability="yes" translation="sulu_admin.title">
      <field-name>title</field-name>
      <entity-name>App\Entity\PublicationTranslation</entity-name>

      <joins ref="translation"/>
    </property>

    <property name="subtitle" visibility="no" searchability="yes" translation="app.admin.subtitle">
      <field-name>subtitle</field-name>
      <entity-name>App\Entity\PublicationTranslation</entity-name>

      <joins ref="translation"/>
    </property>

    <concatenation-property name="creator" translation="sulu_admin.creator" visibility="no" searchability="yes">
      <field>
        <field-name>firstName</field-name>
        <entity-name>%sulu.model.contact.class%_creator</entity-name>

        <joins ref="creator"/>
      </field>
      <field>
        <field-name>lastName</field-name>
        <entity-name>%sulu.model.contact.class%_creator</entity-name>

        <joins ref="creator"/>
      </field>

      <filter type="selection">
        <params>
          <param name="displayProperty" value="fullName" />
          <param name="resourceKey" value="contacts" />
        </params>
      </filter>
    </concatenation-property>

    <property name="created" translation="sulu_admin.created" type="datetime" visibility="yes">
      <field-name>created</field-name>
      <entity-name>App\Entity\PublicationTranslation</entity-name>

      <joins ref="translation"/>
    </property>

    <concatenation-property name="changer" translation="sulu_admin.changer" visibility="no" searchability="yes">
      <field>
        <field-name>firstName</field-name>
        <entity-name>%sulu.model.contact.class%_changer</entity-name>

        <joins ref="changer"/>
      </field>
      <field>
        <field-name>lastName</field-name>
        <entity-name>%sulu.model.contact.class%_changer</entity-name>

        <joins ref="changer"/>
      </field>

      <filter type="selection">
        <params>
          <param name="displayProperty" value="fullName" />
          <param name="resourceKey" value="contacts" />
        </params>
      </filter>
    </concatenation-property>

    <property name="changed" translation="sulu_admin.changed" type="datetime" visibility="yes">
      <field-name>changed</field-name>
      <entity-name>App\Entity\PublicationTranslation</entity-name>

      <joins ref="translation"/>
    </property>
  </properties>
</list>
