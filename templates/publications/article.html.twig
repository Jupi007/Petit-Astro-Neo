{% extends "base.html.twig" %}

{% set headerTitle = content.title %}
{% set headerSubtitle = null %}
{% set coverSize = coverSize|default('full') %}
{% set headerImage = content.coverImage|default %}

{% block content %}
  {% include "includes/_blocks.html.twig" %}

  {% set typoFormContent %}
    <turbo-frame id="typo-form" x-data="{ expanded: false }">
      <h2 class="text-base text-end font-semibold underline m-0">
        <span
        @click="expanded = ! expanded"
        class="cursor-pointer"
        >
          {{ 'app.publication_page.report_typo'|trans }}
        </span>
      </h2>
      <div
        x-show="expanded"
        x-collapse
        x-cloak
        class="overflow-hidden"
      >
        {% if app.request.get('send') != 'true' %}
          {{ form_start(typoForm) }}
            {{ form_widget(typoForm) }}
  
            {% include "includes/common/_button.html.twig" with {
              'type': 'submit',
              'label': 'app.submit'|trans,
              'small': true,
              'class': 'mx-auto',
            } only %}
          {{ form_end(typoForm) }}
        {% else %}
          {% include "includes/common/_alert.html.twig" with {
            'style': 'success',
            'label': 'app.publication_page.typo_thanks'|trans,
            'class': 'mt-4'
          } only %}
        {% endif %}
      </div>
    </turbo-frame>
  {% endset %}

  {% include "includes/common/_page_container.html.twig" with {
    'content': typoFormContent,
    'class': 'my-6'
  } only %}

  {% if content.definitions|length > 0 %}
    {% set lexiconContent %}
      <h2 class="text-center mb-6 text-2xl font-colombia">
        {{ 'app.publication_page.lexicon_title'|trans }}
      </h2>
      
      {% set definitionGridContent %}
        {% for definition in content.definitions %}
          {% include "includes/common/_definition.html.twig" with {
            'definition': definition,
            'collapseMin': '73px',
          } only %}
        {% endfor %}
      {% endset %}

      {% include "includes/common/_definition_grid.html.twig" with {
        'content': definitionGridContent,
      } only %}
    {% endset %}

    {% include "includes/common/_page_container.html.twig" with {
      'content': lexiconContent,
      'class': 'my-6 py-6 border-t border-outline dark:border-outline-invert'
    } only %}
  {% endif %}
{% endblock %}
